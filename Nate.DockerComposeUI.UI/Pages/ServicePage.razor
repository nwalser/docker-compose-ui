@page "/services/{ImageNamespace}/{ImageTag}"
@using Nate.DockerComposeUI.Image.Repository
@using Nate.DockerComposeUI.Image.Model

<MudText Typo="Typo.h2">Servic</MudText>


<MudGrid>
    <MudItem xs="9">
        <MudGrid>
            <MudItem xs="12">
                <MudPaper>
                    <MudText Typo="Typo.h6">Minmal Example Deployment [Download]</MudText>
                    <MudText Typo="Typo.body1">version: '3.1'</MudText>
                    <MudText Typo="Typo.body1">  services:</MudText>
                    <MudText Typo="Typo.body1">    mongo:</MudText>
                    <MudText Typo="Typo.body1">      image: mongo</MudText>
                    <MudText Typo="Typo.body1">      restart: always</MudText>
                    <MudText Typo="Typo.body1">      environment:</MudText>
                    <MudText Typo="Typo.body1">        MONGO_INITDB_ROOT_USERNAME: root</MudText>
                    <MudText Typo="Typo.body1">        MONGO_INITDB_ROOT_PASSWORD: example</MudText>
                </MudPaper>
            </MudItem>
            <MudItem xs="12">
                <MudPaper>
                    <MudText Typo="Typo.h6">Extended Example Deployment [Download]</MudText>
                    <MudText Typo="Typo.body1">version: '3.1'</MudText>
                    <MudText Typo="Typo.body1">  services:</MudText>
                    <MudText Typo="Typo.body1">    mongo:</MudText>
                    <MudText Typo="Typo.body1">      image: mongo</MudText>
                    <MudText Typo="Typo.body1">      restart: always</MudText>
                    <MudText Typo="Typo.body1">      environment:</MudText>
                    <MudText Typo="Typo.body1">        MONGO_INITDB_ROOT_USERNAME: root</MudText>
                    <MudText Typo="Typo.body1">        MONGO_INITDB_ROOT_PASSWORD: example</MudText>
                </MudPaper>
            </MudItem>
        </MudGrid>
        
        

    </MudItem>
    <MudItem xs="3">
        <MudGrid>
            <MudItem xs="12">
                <MudPaper>
                    <MudText Typo="Typo.h6">Other Tags</MudText>
                    <MudText Typo="Typo.body1">latest (Clickable), 1.20.2, 1.1.1, 3.332.2, nanoserver-4.3.3, ubuntu-3</MudText>
                </MudPaper>
            </MudItem>
            <MudItem xs="12">
                <MudPaper>
                    <MudText Typo="Typo.h6">Ports</MudText>
                    <MudText Typo="Typo.body1">5300: Webinterface</MudText>
                    <MudText Typo="Typo.body1">27000: MongoDb Client</MudText>
                </MudPaper>
            </MudItem>
            <MudItem xs="12">
                <MudPaper>
                    <MudText Typo="Typo.h6">Environment Variables</MudText>
                    <MudText Typo="Typo.body1">Username: Default Username for root user</MudText>
                    <MudText Typo="Typo.body1">Password: Default Password for root user</MudText>
                </MudPaper>
            </MudItem>
            <MudItem xs="12">
                <MudPaper>
                    <MudText Typo="Typo.h6">Configuration Files</MudText>
                    <MudText Typo="Typo.body1">traeffic_config: /usr/traeffic/config.yml</MudText>
                    <MudText Typo="Typo.body1">config2: /mnt/configs/test.json</MudText>
                </MudPaper>
            </MudItem>
            <MudItem xs="12">
                <MudPaper>
                    <MudText Typo="Typo.h6">Secrets</MudText>
                    <MudText Typo="Typo.body1">password: password secret</MudText>
                </MudPaper>
            </MudItem>
            <MudItem xs="12">
                <MudPaper>
                    <MudText Typo="Typo.h6">Volumes</MudText>
                    <MudText Typo="Typo.body1">data: data gets stored here</MudText>
                </MudPaper>
            </MudItem>
            <MudItem xs="12">
                <MudPaper>
                    <MudText Typo="Typo.h6">Related Images</MudText>
                    <MudText Typo="Typo.body1">mongo-express: Webinterface for mongodb</MudText>
                    <MudText Typo="Typo.body1">redis: Caching platform</MudText>
                </MudPaper>
            </MudItem>
            
        </MudGrid>
    </MudItem>
</MudGrid>



@code {
    [Inject]
    private IImageRepository Repository { get; set; } = null!;
    
    [Parameter]
    public string? ImageNamespace { get; set; }
    [Parameter]
    public string? ImageTag { get; set; }
    
    private ImageLayout? ImageLayout { get; set; }
    
    protected override async Task OnInitializedAsync()
    {
        if (string.IsNullOrEmpty(ImageNamespace))
            throw new ArgumentNullException(nameof(ImageNamespace));

        if (string.IsNullOrEmpty(ImageTag))
            throw new ArgumentNullException(nameof(ImageTag));
        
        ImageLayout = await Repository.Load(ImageNamespace, ImageTag);
    }
}